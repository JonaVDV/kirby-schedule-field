{
  "version": 3,
  "sources": ["../../kirbyuse/dist/index.mjs"],
  "sourcesContent": ["const globalVue = window.Vue;\n\nfunction usePanel() {\n  return window.panel;\n}\n\nfunction useApi() {\n  return usePanel().api;\n}\n\nfunction useApp() {\n  return usePanel().app;\n}\n\nfunction useBlock(props, emit) {\n  const field = (name, fallback = null) => {\n    let field2 = null;\n    for (const tab of Object.values(\n      props.fieldset.tabs ?? {}\n    )) {\n      if (tab.fields[name]) {\n        field2 = tab.fields[name];\n      }\n    }\n    return field2 ?? fallback;\n  };\n  const open = () => {\n    emit?.(\"open\");\n  };\n  const update = (content) => {\n    emit?.(\"update\", {\n      ...props.content,\n      ...content\n    });\n  };\n  return {\n    field,\n    open,\n    update\n  };\n}\n\nconst isKirby5 = () => window.panel.plugins.viewButtons !== void 0;\nconst isKirby4 = () => !isKirby5();\n\nfunction useStore() {\n  if (isKirby5()) {\n    return new Proxy({}, {\n      get() {\n        throw new Error(\n          \"Vuex store is not available. Are you using Kirby 5? Use the `useContent` composable instead.\"\n        );\n      }\n    });\n  }\n  const store = usePanel().app.$store;\n  return store;\n}\n\nfunction useContent() {\n  const panel = usePanel();\n  const store = useStore();\n  const _isKirby5 = isKirby5();\n  const currentContent = _isKirby5 ? computed(() => panel.view.props.content) : computed(() => store.getters[\"content/values\"]());\n  const contentChanges = _isKirby5 ? computed(() => panel.content.changes()) : computed(() => store.getters[\"content/changes\"]());\n  const hasChanges = _isKirby5 ? computed(() => Object.keys(contentChanges.value).length > 0) : computed(() => store.getters[\"content/hasChanges\"]());\n  const content = _isKirby5 ? panel.content : new Proxy({}, {\n    get() {\n      return () => {\n      };\n    }\n  });\n  const update = async (values, save = true) => {\n    if (!_isKirby5 && values) {\n      for (const [key, value] of Object.entries(values)) {\n        store.dispatch(\"content/update\", [key, value]);\n      }\n    }\n    const viewContent = content.merge(values);\n    if (save) {\n      await content.save(viewContent);\n    }\n  };\n  return {\n    // Properties\n    content,\n    // Reactive getters\n    currentContent,\n    contentChanges,\n    hasChanges,\n    // Methods\n    update\n  };\n}\n\nfunction useDialog() {\n  function openTextDialog(text) {\n    let result = false;\n    return new Promise((resolve) => {\n      const panel = usePanel();\n      panel.dialog.open({\n        component: \"k-text-dialog\",\n        props: { text },\n        on: {\n          // Close event will always be triggered, even on submit\n          close: () => {\n            setTimeout(() => {\n              resolve(result);\n            }, 25);\n          },\n          submit: () => {\n            result = true;\n            panel.dialog.close();\n          }\n        }\n      });\n    });\n  }\n  function openFieldsDialog(props) {\n    let result;\n    return new Promise((resolve) => {\n      const panel = usePanel();\n      panel.dialog.open({\n        component: \"k-form-dialog\",\n        props,\n        on: {\n          // Close event will always be triggered, even on submit\n          close: () => {\n            setTimeout(() => {\n              resolve(result);\n            }, 25);\n          },\n          submit: (event) => {\n            result = event;\n            panel.dialog.close();\n          }\n        }\n      });\n    });\n  }\n  return {\n    openTextDialog,\n    openFieldsDialog\n  };\n}\n\nfunction useI18n() {\n  const panel = usePanel();\n  function t(value) {\n    if (!value || typeof value === \"string\") return value;\n    return value[panel.translation.code] ?? Object.values(value)[0];\n  }\n  return {\n    t\n  };\n}\n\nfunction useSection() {\n  const api = useApi();\n  const load = ({ parent, name }) => api.get(`${parent}/sections/${name}`);\n  return {\n    load\n  };\n}\n\nconst LOG_LEVELS = {\n  error: 0,\n  warn: 1,\n  log: 2,\n  info: 3,\n  success: 3\n};\nfunction createLogger(tag) {\n  const reporter = new BrowserReporter();\n  return new Proxy({}, {\n    get(target, prop) {\n      return (...args) => {\n        reporter.log({\n          level: LOG_LEVELS[prop],\n          type: prop,\n          tag,\n          args\n        });\n      };\n    }\n  });\n}\nclass BrowserReporter {\n  defaultColor = \"#7f8c8d\";\n  // Gray\n  levelColorMap = {\n    0: \"#c0392b\",\n    // Red\n    1: \"#f39c12\",\n    // Yellow\n    3: \"#00BCD4\"\n    // Cyan\n  };\n  typeColorMap = {\n    success: \"#2ecc71\"\n    // Green\n  };\n  constructor() {\n  }\n  log(logEvent) {\n    const consoleLogFn = resolveLogFn(logEvent.level);\n    const type = logEvent.type === \"log\" ? \"\" : logEvent.type;\n    const tag = logEvent.tag || \"\";\n    const color = this.typeColorMap[logEvent.type] || this.levelColorMap[logEvent.level] || this.defaultColor;\n    const style = `\nbackground: ${color};\nborder-radius: 0.5em;\ncolor: white;\nfont-weight: bold;\npadding: 2px 0.5em;\n`.trimStart();\n    const badge = `%c${[tag, type].filter(Boolean).join(\":\")}`;\n    if (typeof logEvent.args[0] === \"string\") {\n      consoleLogFn(\n        `${badge}%c ${logEvent.args[0]}`,\n        style,\n        // Empty string as style resets to default console style\n        \"\",\n        ...logEvent.args.slice(1)\n      );\n    } else {\n      consoleLogFn(badge, style, ...logEvent.args);\n    }\n  }\n}\nfunction resolveLogFn(level) {\n  if (level < 1) return console.error;\n  return console.log;\n}\n\nconst registeredAssets = [];\nconst moduleCache = /* @__PURE__ */ new Map();\nasync function registerPluginAssets(assets) {\n  if (!Array.isArray(assets)) {\n    throw new TypeError(`Expected an array, got ${typeof assets}`);\n  }\n  for (const asset of assets) {\n    if (!registeredAssets.some((existing) => existing.filename === asset.filename)) {\n      registeredAssets.push(asset);\n    }\n  }\n}\nfunction resolvePluginAsset(filename) {\n  if (registeredAssets.length === 0) {\n    throw new Error(\"Plugin assets not registered\");\n  }\n  const asset = registeredAssets.find((asset2) => asset2.filename === filename);\n  if (!asset) {\n    throw new Error(`Plugin asset \"${filename}\" not found`);\n  }\n  return asset;\n}\nasync function loadPluginModule(filename) {\n  if (!filename.endsWith(\".js\")) {\n    filename += \".js\";\n  }\n  if (moduleCache.has(filename)) {\n    return moduleCache.get(filename);\n  }\n  const asset = resolvePluginAsset(filename);\n  const mod = await import(\n    /* @vite-ignore */\n    asset.url\n  );\n  moduleCache.set(filename, mod);\n  return mod;\n}\n\nconst computed = globalVue.computed;\nconst customRef = globalVue.customRef;\nconst defineAsyncComponent = globalVue.defineAsyncComponent;\nconst defineComponent = globalVue.defineComponent;\nconst effectScope = globalVue.effectScope;\nconst getCurrentInstance = globalVue.getCurrentInstance;\nconst getCurrentScope = globalVue.getCurrentScope;\nconst h = globalVue.h;\nconst inject = globalVue.inject;\nconst isProxy = globalVue.isProxy;\nconst isReactive = globalVue.isReactive;\nconst isReadonly = globalVue.isReadonly;\nconst isRef = globalVue.isRef;\nconst isShallow = globalVue.isShallow;\nconst markRaw = globalVue.markRaw;\nconst nextTick = globalVue.nextTick;\nconst onActivated = globalVue.onActivated;\nconst onBeforeMount = globalVue.onBeforeMount;\nconst onBeforeUnmount = globalVue.onBeforeUnmount;\nconst onBeforeUpdate = globalVue.onBeforeUpdate;\nconst onDeactivated = globalVue.onDeactivated;\nconst onErrorCaptured = globalVue.onErrorCaptured;\nconst onMounted = globalVue.onMounted;\nconst onRenderTracked = globalVue.onRenderTracked;\nconst onRenderTriggered = globalVue.onRenderTriggered;\nconst onScopeDispose = globalVue.onScopeDispose;\nconst onServerPrefetch = globalVue.onServerPrefetch;\nconst onUnmounted = globalVue.onUnmounted;\nconst onUpdated = globalVue.onUpdated;\nconst provide = globalVue.provide;\nconst proxyRefs = globalVue.proxyRefs;\nconst reactive = globalVue.reactive;\nconst readonly = globalVue.readonly;\nconst ref = globalVue.ref;\nconst shallowReactive = globalVue.shallowReactive;\nconst shallowReadonly = globalVue.shallowReadonly;\nconst shallowRef = globalVue.shallowRef;\nconst toRaw = globalVue.toRaw;\nconst toRef = globalVue.toRef;\nconst toRefs = globalVue.toRefs;\nconst triggerRef = globalVue.triggerRef;\nconst unref = globalVue.unref;\nconst useAttrs = globalVue.useAttrs;\nconst useCssModule = globalVue.useCssModule;\nconst useCssVars = globalVue.useCssVars;\nconst useListeners = globalVue.useListeners;\nconst useSlots = globalVue.useSlots;\nconst watch = globalVue.watch;\nconst watchEffect = globalVue.watchEffect;\nconst watchPostEffect = globalVue.watchPostEffect;\nconst watchSyncEffect = globalVue.watchSyncEffect;\n\nexport { computed, createLogger, customRef, defineAsyncComponent, defineComponent, effectScope, getCurrentInstance, getCurrentScope, globalVue, h, inject, isKirby4, isKirby5, isProxy, isReactive, isReadonly, isRef, isShallow, loadPluginModule, markRaw, nextTick, onActivated, onBeforeMount, onBeforeUnmount, onBeforeUpdate, onDeactivated, onErrorCaptured, onMounted, onRenderTracked, onRenderTriggered, onScopeDispose, onServerPrefetch, onUnmounted, onUpdated, provide, proxyRefs, reactive, readonly, ref, registerPluginAssets, resolvePluginAsset, shallowReactive, shallowReadonly, shallowRef, toRaw, toRef, toRefs, triggerRef, unref, useApi, useApp, useAttrs, useBlock, useContent, useCssModule, useCssVars, useDialog, useI18n, useListeners, usePanel, useSection, useSlots, useStore, watch, watchEffect, watchPostEffect, watchSyncEffect };\n"],
  "mappings": "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",
  "names": []
}
